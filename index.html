<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Alquileres</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <!-- Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>
<body>
    <div id="app">
        <!-- Login View -->
        <section id="login-view" class="view active">
            <div class="login-container glass-card">
                <h1>Bienvenido</h1>
                <p>Gestiona tus propiedades con elegancia.</p>
                <form id="login-form">
                    <div class="input-group">
                        <label for="username">Usuario</label>
                        <input type="text" id="username" placeholder="Tu usuario" required>
                    </div>
                    <div class="input-group">
                        <label for="password">Contraseña</label>
                        <input type="password" id="password" placeholder="Tu contraseña" required>
                    </div>
                    <button type="submit" class="btn-primary">Ingresar</button>
                </form>
            </div>
        </section>

        <!-- Main App Layout (Hidden by default) -->
        <main id="main-layout" class="hidden">
            <!-- Desktop Header -->
            <header class="desktop-header glass-panel">
                <div class="logo">Inmuebles</div>
                <nav class="desktop-nav">
                    <button class="nav-link active" data-target="home-view">Inicio</button>
                    <button class="nav-link" data-target="properties-view">Propiedades</button>
                    <button class="nav-link" data-target="finances-view">Finanzas</button>
                </nav>
                <div class="user-profile">
                    <button id="theme-toggle-btn" class="icon-btn" title="Cambiar Tema">
                        <span class="material-symbols-rounded">dark_mode</span>
                    </button>
                    <span id="user-display-name">Usuario</span>
                    <button id="logout-btn" class="icon-btn"><span class="material-symbols-rounded">logout</span></button>
                </div>
            </header>

            <!-- Views Container -->
            <div class="content-container">
                
                <!-- Home / Dashboard View -->
                <section id="home-view" class="view hidden">
                    <header class="view-header">
                        <h2>Inicio</h2>
                    </header>
                    <div class="dashboard-grid">
                        <div class="stat-card glass-card">
                            <h3>Total Propiedades</h3>
                            <p class="stat-value" id="total-properties-count">0</p>
                        </div>
                        <div class="stat-card glass-card">
                            <h3>Ingresos Mensuales</h3>
                            <p class="stat-value" id="total-income-display">$0</p>
                        </div>
                    </div>
                    
                    <div class="recent-activity glass-card">
                        <h3>Acciones Rápidas</h3>
                        <button class="btn-secondary" id="quick-add-btn">
                            <span class="material-symbols-rounded">add_home</span> Agregar Propiedad
                        </button>
                    </div>
                </section>

                <!-- Properties View -->
                <section id="properties-view" class="view hidden">
                    <header class="view-header">
                        <h2>Mis Propiedades</h2>
                        <button class="btn-icon-primary" id="add-property-fab">
                            <span class="material-symbols-rounded">add</span>
                        </button>
                    </header>
                    <div id="properties-list" class="properties-grid">
                        <!-- Properties will be injected here -->
                    </div>
                </section>

                <!-- Add Property Form (Overlay/Modal) -->
                <div id="add-property-modal" class="modal hidden">
                    <div class="modal-content glass-card">
                        <header class="modal-header">
                            <h2>Nueva Propiedad</h2>
                            <button class="close-modal"><span class="material-symbols-rounded">close</span></button>
                        </header>
                        <form id="add-property-form">
                            <div class="form-group">
                                <label>Dirección</label>
                                <input type="text" name="address" required>
                            </div>
                            <div class="form-group">
                                <label>Inquilino</label>
                                <input type="text" name="tenantName" required>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Precio ($)</label>
                                    <input type="number" name="price" required>
                                </div>
                                <div class="form-group">
                                    <label>Aumento (%)</label>
                                    <input type="number" name="increaseRate">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Frecuencia Aumento</label>
                                <select name="increaseFrequency">
                                    <option value="6">Semestral (6 meses)</option>
                                    <option value="12">Anual (12 meses)</option>
                                    <option value="6">Semestral (6 meses)</option>
                                    <option value="12">Anual (12 meses)</option>
                                    <option value="3">Trimestral (3 meses)</option>
                                </select>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Inicio Contrato</label>
                                    <input type="date" name="contractStartDate" required>
                                </div>
                                <div class="form-group">
                                    <label>Fin Contrato</label>
                                    <input type="date" name="contractEndDate" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Día de Vencimiento (1-31)</label>
                                <input type="number" name="rentDueDay" min="1" max="31" required>
                            </div>
                            <!-- Placeholder for file uploads -->
                            <div class="form-group">
                                <label>Foto de la Propiedad</label>
                                <input type="file" name="photo" accept="image/*">
                            </div>
                            <div class="form-group">
                                <label>Contrato (PDF/Doc)</label>
                                <input type="file" name="contract" accept=".pdf,.doc,.docx">
                            </div>
                            <button type="submit" class="btn-primary">Guardar Propiedad</button>
                        </form>
                    </div>
                </div>

                <!-- Property Details Modal with Calendar -->
                <div id="property-details-modal" class="modal hidden">
                    <div class="modal-content glass-card" style="max-width: 800px;">
                        <header class="modal-header">
                            <h2 id="details-title">Detalles de Propiedad</h2>
                            <button class="close-modal" id="close-details-modal"><span class="material-symbols-rounded">close</span></button>
                        </header>
                        <div class="details-body">
                            <div class="details-info" id="details-info-container">
                                <!-- Info injected here -->
                            </div>
                            <div class="calendar-section">
                                <h3>Calendario de Pagos</h3>
                                <div class="calendar-container glass-panel">
                                    <div class="calendar-header">
                                        <button id="prev-month" class="icon-btn"><span class="material-symbols-rounded">chevron_left</span></button>
                                        <span id="calendar-month-year">Enero 2024</span>
                                        <button id="next-month" class="icon-btn"><span class="material-symbols-rounded">chevron_right</span></button>
                                    </div>
                                    <div class="calendar-grid" id="calendar-grid">
                                        <!-- Days injected here -->
                                    </div>
                                    <div class="calendar-legend">
                                        <div class="legend-item"><span class="dot dot-due"></span> Vencimiento</div>
                                        <div class="legend-item"><span class="dot dot-increase"></span> Aumento</div>
                                        <div class="legend-item"><span class="dot dot-start-end"></span> Inicio/Fin</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Finances View -->
                <section id="finances-view" class="view hidden">
                    <header class="view-header">
                        <h2>Finanzas</h2>
                    </header>
                    <div class="finances-summary glass-card">
                        <h3>Ingresos Totales Mensuales</h3>
                        <p class="big-number" id="finance-total-income">$0</p>
                    </div>
                    <div class="finances-list glass-card">
                        <h3>Desglose por Propiedad</h3>
                        <ul id="finance-breakdown-list">
                            <!-- List items injected here -->
                        </ul>
                    </div>
                </section>

                <!-- Menu View (Mobile Only) -->
                <section id="menu-view" class="view hidden">
                    <header class="view-header">
                        <h2>Menú</h2>
                    </header>
                    <div class="menu-list glass-card">
                        <button class="menu-item">
                            <span class="material-symbols-rounded">person</span> Perfil
                        </button>
                        <button class="menu-item">
                            <span class="material-symbols-rounded">settings</span> Configuración
                        </button>
                        <button class="menu-item" id="mobile-theme-toggle">
                            <span class="material-symbols-rounded">dark_mode</span> Tema
                        </button>
                        <button class="menu-item text-danger" id="mobile-logout-btn">
                            <span class="material-symbols-rounded">logout</span> Cerrar Sesión
                        </button>
                    </div>
                </section>
            </div>

            <!-- Mobile Bottom Nav -->
            <nav class="mobile-nav glass-panel">
                <button class="nav-item active" data-target="home-view">
                    <span class="material-symbols-rounded">home</span>
                    <span class="label">Inicio</span>
                </button>
                <button class="nav-item" data-target="properties-view">
                    <span class="material-symbols-rounded">apartment</span>
                    <span class="label">Propiedades</span>
                </button>
                <button class="nav-item" data-target="finances-view">
                    <span class="material-symbols-rounded">payments</span>
                    <span class="label">Finanzas</span>
                </button>
                <button class="nav-item" data-target="menu-view">
                    <span class="material-symbols-rounded">menu</span>
                    <span class="label">Menú</span>
                </button>
            </nav>
        </main>
    </div>

    <script src="js/data.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
